jQuery(document).ready(function(e){function t(t,a){if(!l)return!1;"object"!=typeof a&&(a={});var i=t.find(".job_filters"),n=e("div.job_listings").index(t);a.form=i.serialize();var o=d+n;try{window.sessionStorage.setItem(o,JSON.stringify(a))}catch(e){}return!1}function a(t){if(!l)return!1;var a=e("div.job_listings").index(t),i=d+a;try{var n=window.sessionStorage.getItem(i);if(n)return JSON.parse(n)}catch(e){}return!1}function i(e,i){if(!l||!e)return!1;var n=a(e);return!!n&&(n.persist_results=i,t(e,n))}function n(e,i){if(!l)return!1;var n=a(e);n||(n={});var o=e.find(".job_listings");return i.html=o.html(),n.results=i,t(e,n)}function o(t){if(!l)return!1;var a=e("div.job_listings").index(t),i=d+a;try{window.sessionStorage.removeItem(i)}catch(e){return!1}return!0}function r(e){if(!l)return!1;var i=a(e);return i||(i={}),i.results=null,t(e,i)}function s(t,a,i){var n=t.find(".job_listings"),o=t.find(".showing_jobs");if("boolean"!=typeof i&&(i=!1),"string"==typeof a.showing&&a.showing){var r=jQuery("<span>").html(a.showing);o.show().html("").html(a.showing_links).prepend(r)}else o.hide();return a.showing_all?o.addClass("wp-job-manager-showing-all"):o.removeClass("wp-job-manager-showing-all"),a.html&&(i?n.append(a.html):n.html(a.html)),!0===t.data("show_pagination")?(t.find(".job-manager-pagination").remove(),a.pagination&&t.append(a.pagination)):(!a.found_jobs||a.max_num_pages<=a.data.page?e(".load_more_jobs:not(.load_previous)",t).hide():e(".load_more_jobs",t).show(),e(".load_more_jobs",t).removeClass("loading").data("page",a.data.page),e("li.job_listing",n).css("visibility","visible")),!0}var l=!1;window.localStorage&&"function"==typeof window.localStorage.setItem&&(l=!0);var d="job_listing_",c=[];if(e("div.job_listings").on("click","li.job_listing a",function(){i(e(this).closest("div.job_listings"),!0)}).on("click",".job-manager-pagination a",function(){var t=e(this).closest("div.job_listings"),a=e(this).data("page");return t.triggerHandler("update_results",[a,!1]),e("body, html").animate({scrollTop:t.offset().top},600),!1}).on("update_results",function(t,a,i){var r,l,d,g="",_=e(this),u=_.find(".job_filters"),p=_.find(".job_listings"),f=_.data("per_page"),h=_.data("orderby"),b=_.data("order"),m=_.data("featured"),j=_.data("filled"),v=_.data("job_types"),w=_.data("post_status"),y=e("div.job_listings").index(this);if(!(y<0)){if(o(_),c[y]&&c[y].abort(),p.addClass("loading"),_.find(".load_more_jobs").data("page",a),!0===_.data("show_filters")){var k=[];e(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]',u).each(function(){k.push(e(this).val())}),r=u.find(':input[name^="search_categories"]').map(function(){return e(this).val()}).get(),l="",d="";var x=u.find(':input[name="search_keywords"]'),S=u.find(':input[name="search_location"]');x.val()!==x.attr("placeholder")&&(l=x.val()),S.val()!==S.attr("placeholder")&&(d=S.val()),g={lang:job_manager_ajax_filters.lang,search_keywords:l,search_location:d,search_categories:r,filter_job_type:k,filter_post_status:w,per_page:f,orderby:h,order:b,page:a,featured:m,filled:j,show_pagination:_.data("show_pagination"),$form_data:u.serialize()}}else r=_.data("categories"),l=_.data("keywords"),d=_.data("location"),r&&("string"!=typeof r&&(r=String(r)),r=r.split(",")),g={lang:job_manager_ajax_filters.lang,search_categories:r,search_keywords:l,search_location:d,filter_post_status:w,filter_job_type:v,per_page:f,orderby:h,order:b,page:a,featured:m,filled:j,show_pagination:_.data("show_pagination")};c[y]=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%","get_listings"),data:g,success:function(e){if(e)try{e.data=g,e.persist_results=!1,s(_,e,i),p.removeClass("loading"),_.triggerHandler("updated_results",e),n(_,e)}catch(e){window.console&&window.console.log(e)}},error:function(e,t,a){window.console&&"abort"!==t&&window.console.log(t+": "+a)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}}),e("#search_keywords, #search_location, .job_types :input, #search_categories, .job-manager-filter").change(function(){var a=e(this).closest("div.job_listings");a.triggerHandler("update_results",[1,!1]),t(a)}).on("keyup",function(t){13===t.which&&e(this).trigger("change")}),e(".job_filters").on("click",".reset",function(){var a=e(this).closest("div.job_listings"),i=e(this).closest("form");return i.find(':input[name="search_keywords"], :input[name="search_location"], .job-manager-filter').not(':input[type="hidden"]').val("").trigger("change.select2"),i.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val("").trigger("change.select2"),e(':input[name="filter_job_type[]"]',i).not(':input[type="hidden"]').attr("checked","checked"),a.triggerHandler("reset"),a.triggerHandler("update_results",[1,!1]),t(a),!1}).on("submit",function(){return!1}),e(document.body).on("click",".load_more_jobs",function(){var t=e(this).closest("div.job_listings"),a=parseInt(e(this).data("page")||1,10);return e(this).addClass("loading"),a+=1,e(this).data("page",a),t.triggerHandler("update_results",[a,!0]),!1}),e.isFunction(e.fn.select2)&&"undefined"!=typeof job_manager_select2_args){var g=job_manager_select2_args;g.allowClear=!0,g.minimum$resultsForSearch=10,e('select[name^="search_categories"]:visible').select2(g)}e(window).on("load",function(){e(".job_filters").each(function(){var t=e(this).closest("div.job_listings"),n=t.find(".job_filters"),o=!1,r=a(t);r&&r.form&&(r.results&&(o=s(t,r.results),i(t,!1)),n.find("input[type=checkbox]").prop("checked",!1),n.deserialize(r.form),n.find(':input[name^="search_categories"]').not(':input[type="hidden"]').trigger("change.select2")),o||t.triggerHandler("update_results",[1,!1])})}),e(window).on("unload",function(){return e("div.job_listings").each(function(){var t=a(e(this));t&&!t.persist_results&&r(e(this))}),!0})});