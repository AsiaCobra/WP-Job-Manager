jQuery(document).ready(function(i){i(document.body).on("click",".job-manager-remove-uploaded-file",function(){var e=i(this).closest(".fieldset-type-file").find("input[type=file][multiple][data-file_limit]");return i(this).closest(".job-manager-uploaded-file").remove(),e.trigger("update_status"),!1}),i(document.body).on("update_status",".fieldset-type-file input[type=file][multiple][data-file_limit]",function(){var e=parseInt(i(this).data("file_limit"),10)-parseInt(i(this).siblings(".job-manager-uploaded-files").first().children(".job-manager-uploaded-file").length,10);e>0?i(this).prop("disabled",!1):i(this).prop("disabled",!0),i(this).data("file_limit_left",e)}),i(document.body).on("change",".fieldset-type-file input[type=file][multiple][data-file_limit]",function(){var e=parseInt(i(this).data("file_limit"),10),t=e-parseInt(i(this).siblings(".job-manager-uploaded-files").first().children(".job-manager-uploaded-file").length,10),a=i(this).get(0);if(void 0!==a.files){var l=parseInt(a.files.length,10);if(e&&l>t){var s=job_manager_job_submission.i18n_over_upload_limit;i(this).data("file_limit_message")&&"string"==typeof i(this).data("file_limit_message")&&(s=i(this).data("file_limit_message")),s=s.replace("%d",e),a.setCustomValidity(s)}else a.setCustomValidity("");a.reportValidity()}return!0}),i(".fieldset-type-file input[type=file][multiple][data-file_limit]").trigger("update_status"),i(document.body).on("click","#submit-job-form .button.save_draft",function(){var e=!0;return i(this).closest("#submit-job-form").find("div.draft-required input[required]").each(function(){if(i(this).get(0).reportValidity(),i(this).is(":invalid"))return e=!1,!1}),e}),i(document.body).on("submit",".job-manager-form:not(.prevent-spinner-behavior)",function(){i(this).find(".spinner").addClass("is-active"),i(this).find("input[type=submit]").addClass("disabled").on("click",function(){return!1})})});